{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";const cartSlice=createSlice({name:\"cart\",initialState:{cartItems:[]},reducers:{addProduct:(state,action)=>{const productToAdd=action.payload;const productIndex=state.cartItems.findIndex(p=>p._id===productToAdd._id);if(productIndex===-1){state.cartItems.push({...productToAdd,quantity:1,sizeOrder:\"\"});}else{state.cartItems[productIndex].quantity+=1;}},deleteProduct:(state,action)=>{const productIdToRemove=action.payload._id;console.log(productIdToRemove);state.cartItems=state.cartItems.filter(item=>item._id!==productIdToRemove);},updateQuantity:(state,action)=>{const{_id,quantity}=action.payload;console.log(quantity);const productToUpdateIndex=state.cartItems.findIndex(p=>p._id===_id);if(productToUpdateIndex!==-1){const newQuantity=Math.max(1,quantity);state.cartItems[productToUpdateIndex].quantity=newQuantity;}},updateSizeProduct:(state,action)=>{const{_id,sizeOrder}=action.payload;const productToUpdateIndex=state.cartItems.findIndex(p=>p._id===_id);if(productToUpdateIndex!==-1){state.cartItems[productToUpdateIndex].sizeOrder=sizeOrder;}},resetCart:state=>{state.cartItems=[];}}});export const{addProduct,deleteProduct,updateQuantity,updateSizeProduct,resetCart}=cartSlice.actions;export const selectCart=state=>state.cart;export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","cartSlice","name","initialState","cartItems","reducers","addProduct","state","action","productToAdd","payload","productIndex","findIndex","p","_id","push","quantity","sizeOrder","deleteProduct","productIdToRemove","console","log","filter","item","updateQuantity","productToUpdateIndex","newQuantity","Math","max","updateSizeProduct","resetCart","actions","selectCart","cart","reducer"],"sources":["C:/Users/truon/OneDrive/Máy tính/Project-Shop/Client/src/redux/Slice/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState: {\r\n    cartItems: [],\r\n  },\r\n  reducers: {\r\n    addProduct: (state, action) => {\r\n      const productToAdd = action.payload;\r\n      const productIndex = state.cartItems.findIndex((p) => p._id === productToAdd._id);\r\n\r\n      if (productIndex === -1) {\r\n        state.cartItems.push({ ...productToAdd, quantity: 1, sizeOrder: \"\" });\r\n      } else {\r\n        state.cartItems[productIndex].quantity += 1;\r\n      }\r\n    },\r\n    deleteProduct: (state, action) => {\r\n      const productIdToRemove = action.payload._id;\r\n      console.log(productIdToRemove)\r\n      state.cartItems = state.cartItems.filter((item) => item._id !== productIdToRemove);\r\n    },\r\n    updateQuantity: (state, action) => {\r\n      const { _id, quantity } = action.payload;\r\n      console.log(quantity)\r\n      const productToUpdateIndex = state.cartItems.findIndex((p) => p._id === _id);\r\n\r\n      if (productToUpdateIndex !== -1) {\r\n        const newQuantity = Math.max(1, quantity);\r\n        state.cartItems[productToUpdateIndex].quantity = newQuantity;\r\n      }\r\n    },\r\n    updateSizeProduct: (state, action) => {\r\n      const { _id, sizeOrder } = action.payload;\r\n      const productToUpdateIndex = state.cartItems.findIndex((p) => p._id === _id);\r\n\r\n      if (productToUpdateIndex !== -1) {\r\n        state.cartItems[productToUpdateIndex].sizeOrder = sizeOrder;\r\n      }\r\n    },\r\n    resetCart: (state) => {\r\n      state.cartItems = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const { addProduct, deleteProduct, updateQuantity, updateSizeProduct, resetCart } = cartSlice.actions;\r\nexport const selectCart = (state) => state.cart;\r\nexport default cartSlice.reducer;\r\n"],"mappings":"AAAA,OAASA,WAAW,KAAQ,kBAAkB,CAE9C,KAAM,CAAAC,SAAS,CAAGD,WAAW,CAAC,CAC5BE,IAAI,CAAE,MAAM,CACZC,YAAY,CAAE,CACZC,SAAS,CAAE,EACb,CAAC,CACDC,QAAQ,CAAE,CACRC,UAAU,CAAEA,CAACC,KAAK,CAAEC,MAAM,GAAK,CAC7B,KAAM,CAAAC,YAAY,CAAGD,MAAM,CAACE,OAAO,CACnC,KAAM,CAAAC,YAAY,CAAGJ,KAAK,CAACH,SAAS,CAACQ,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKL,YAAY,CAACK,GAAG,CAAC,CAEjF,GAAIH,YAAY,GAAK,CAAC,CAAC,CAAE,CACvBJ,KAAK,CAACH,SAAS,CAACW,IAAI,CAAC,CAAE,GAAGN,YAAY,CAAEO,QAAQ,CAAE,CAAC,CAAEC,SAAS,CAAE,EAAG,CAAC,CAAC,CACvE,CAAC,IAAM,CACLV,KAAK,CAACH,SAAS,CAACO,YAAY,CAAC,CAACK,QAAQ,EAAI,CAAC,CAC7C,CACF,CAAC,CACDE,aAAa,CAAEA,CAACX,KAAK,CAAEC,MAAM,GAAK,CAChC,KAAM,CAAAW,iBAAiB,CAAGX,MAAM,CAACE,OAAO,CAACI,GAAG,CAC5CM,OAAO,CAACC,GAAG,CAACF,iBAAiB,CAAC,CAC9BZ,KAAK,CAACH,SAAS,CAAGG,KAAK,CAACH,SAAS,CAACkB,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACT,GAAG,GAAKK,iBAAiB,CAAC,CACpF,CAAC,CACDK,cAAc,CAAEA,CAACjB,KAAK,CAAEC,MAAM,GAAK,CACjC,KAAM,CAAEM,GAAG,CAAEE,QAAS,CAAC,CAAGR,MAAM,CAACE,OAAO,CACxCU,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC,CACrB,KAAM,CAAAS,oBAAoB,CAAGlB,KAAK,CAACH,SAAS,CAACQ,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKA,GAAG,CAAC,CAE5E,GAAIW,oBAAoB,GAAK,CAAC,CAAC,CAAE,CAC/B,KAAM,CAAAC,WAAW,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEZ,QAAQ,CAAC,CACzCT,KAAK,CAACH,SAAS,CAACqB,oBAAoB,CAAC,CAACT,QAAQ,CAAGU,WAAW,CAC9D,CACF,CAAC,CACDG,iBAAiB,CAAEA,CAACtB,KAAK,CAAEC,MAAM,GAAK,CACpC,KAAM,CAAEM,GAAG,CAAEG,SAAU,CAAC,CAAGT,MAAM,CAACE,OAAO,CACzC,KAAM,CAAAe,oBAAoB,CAAGlB,KAAK,CAACH,SAAS,CAACQ,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKA,GAAG,CAAC,CAE5E,GAAIW,oBAAoB,GAAK,CAAC,CAAC,CAAE,CAC/BlB,KAAK,CAACH,SAAS,CAACqB,oBAAoB,CAAC,CAACR,SAAS,CAAGA,SAAS,CAC7D,CACF,CAAC,CACDa,SAAS,CAAGvB,KAAK,EAAK,CACpBA,KAAK,CAACH,SAAS,CAAG,EAAE,CACtB,CACF,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEE,UAAU,CAAEY,aAAa,CAAEM,cAAc,CAAEK,iBAAiB,CAAEC,SAAU,CAAC,CAAG7B,SAAS,CAAC8B,OAAO,CAC5G,MAAO,MAAM,CAAAC,UAAU,CAAIzB,KAAK,EAAKA,KAAK,CAAC0B,IAAI,CAC/C,cAAe,CAAAhC,SAAS,CAACiC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}